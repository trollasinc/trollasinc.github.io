<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/png" href="../Logos/Trollas. Inc.png" />
    <title>Planes - Trollas. Inc.</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap"
      rel="stylesheet" />
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Inter", sans-serif;
      }
      body {
        background: #f0f4f8;
        color: #111;
        display: flex;
        justify-content: center;
        padding: 2rem;
      }
      .container {
        max-width: 800px;
        width: 100%;
      }
      h1,
      h2,
      h3 {
        color: #111;
        margin-bottom: 1rem;
        text-align: center;
      }
      h1 {
        font-size: 26pt;
        margin-bottom: 2rem;
      }
      h2 {
        font-size: 20pt;
        margin-bottom: 1rem;
      }
      h3 {
        font-size: 16pt;
        margin-bottom: 0.5rem;
      }
      p {
        font-size: 11pt;
        margin-bottom: 0.5rem;
        line-height: 1.5;
        text-align: center;
      }
      a {
        color: #1155cc;
        text-decoration: underline;
      }
      a:hover {
        opacity: 0.8;
      }
      .plan {
        background: rgba(255, 255, 255, 0.5);
        backdrop-filter: blur(10px);
        border-radius: 15px;
        padding: 2rem;
        margin-bottom: 2rem;
        width: 100%;
        text-align: center;
      }
      .plan img {
        width: 150px;
        margin-bottom: 1rem;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>Planes de Servicio üíª</h1>

      <div class="plan">
        <img src="images/image1.png" alt="Plan B√°sico" />
        <h2>Plan B√°sico</h2>
        <p>
          <strong>Incluye:</strong>
          Dise√±o de web simple con texto, enlaces e im√°genes.
        </p>
        <p>
          Dominio empresarial (Trollas. Inc.) ej.:
          <a href="https://trollasinc.github.io/tu-nombre-aqui">
            trollasinc.github.io/tu-nombre-aqui
          </a>
          ,
          <a href="https://tu-nombre-aqui.netlify.app/">
            tu-nombre-aqui.netlify.app
          </a>
          ,
          <a href="https://leonperriman.github.io/tu-nombre-aqui">
            leonperriman.github.io/tu-nombre-aqui
          </a>
        </p>
        <p>
          <strong>Coste:</strong>
          Gratuito (Con publicidad y marca de agua de la empresa)
        </p>
        <p>
          <strong>Posibles gastos adicionales:</strong>
          Remover publicidad: 1,99‚Ç¨/mes. Dominio personalizado: depende del
          proveedor.
        </p>
      </div>

      <div class="plan">
        <img src="images/image1.png" alt="Plan Premium" />
        <h2>Plan Premium</h2>
        <p>
          <strong>Incluye:</strong>
          Dise√±o de web m√°s complejo, minimalista, acciones como c√°lculos y JS
          simple.
        </p>
        <p>
          Dominio empresarial (Trollas. Inc.) ej.:
          <a href="https://trollasinc.github.io/tu-nombre-aqui">
            trollasinc.github.io/tu-nombre-aqui
          </a>
          ,
          <a href="https://tu-nombre-aqui.netlify.app/">
            tu-nombre-aqui.netlify.app
          </a>
          ,
          <a href="https://leonperriman.github.io/tu-nombre-aqui">
            leonperriman.github.io/tu-nombre-aqui
          </a>
        </p>
        <p>
          <strong>Coste:</strong>
          10‚Ç¨ (Con publicidad y marca de agua de la empresa)
        </p>
        <p>
          <strong>Posibles gastos adicionales:</strong>
          Remover publicidad: 1,99‚Ç¨/mes. Dominio personalizado: depende del
          proveedor.
        </p>
      </div>
      <div class="plan">
        Si quieres puedes consultar nuestras plantillas online en:
        <br />
        <a href="../Plantillas/1/">Plantilla 1</a>
        <br />
        Si deseas usar alguna de estas plantillas, no olvides indicarlo en el
        formulario junto al numero de plantilla.
      </div>
      <div class="plan">
        Contratar servicio ahora:
        <a
          href="https://docs.google.com/forms/d/e/1FAIpQLSfOekoEImmv-6kDu5-jRrlxmxGokDBuQQATCHz73VXo2USS3Q/viewform?usp=header">
          Haz Click Aqui
        </a>
        <br />
        <br />
        Contacto:
        <a href="mailto:trollasinc2024@gmail.com">trollasinc2024@gmail.com</a>
      </div>
    </div>
    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-app.js";
      import {
        getFirestore,
        doc,
        getDoc,
        setDoc,
        updateDoc,
        increment,
        collection,
        addDoc,
      } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-firestore.js";

      // Config Firebase
      const firebaseConfig = {
        apiKey: "AIzaSyCx8ITT_KZVSzZTWN20qV1yEZ5CwILkm2M",
        authDomain: "trollas-inc-administracion.firebaseapp.com",
        projectId: "trollas-inc-administracion",
        storageBucket: "trollas-inc-administracion.firebasestorage.app",
        messagingSenderId: "247309275509",
        appId: "1:247309275509:web:33d62925b18474b2ac833c",
        measurementId: "G-G2T4HD22YH",
      };
      const app = initializeApp(firebaseConfig);
      const db = getFirestore(app);

      // Contar visita solo una vez por dispositivo
      async function contarVisitaUnaVez() {
        const yaVisito = localStorage.getItem("yaVisito");
        if (yaVisito) return;

        const visitasRef = doc(db, "estadisticas", "visitas");
        const visitasSnap = await getDoc(visitasRef);

        if (!visitasSnap.exists()) {
          await setDoc(visitasRef, { contador: 1 });
        } else {
          await updateDoc(visitasRef, { contador: increment(1) });
        }

        localStorage.setItem("yaVisito", "true");
      }

      // Info del dispositivo
      function obtenerInfoDispositivo() {
        const ua = navigator.userAgent || "";
        let so = "Desconocido";
        if (/Android/i.test(ua)) so = "Android";
        else if (/iPhone|iPad|iPod/i.test(ua)) so = "iOS";
        else if (/Windows/i.test(ua)) so = "Windows";
        else if (/Mac/i.test(ua)) so = "MacOS";
        else if (/Linux/i.test(ua)) so = "Linux";

        const dispositivo = /Android|iPhone|iPad|iPod/i.test(ua)
          ? "M√≥vil"
          : "PC";

        let navegador = "Desconocido";
        if (/Chrome/i.test(ua) && !/Edge|OPR/i.test(ua)) navegador = "Chrome";
        else if (/Firefox/i.test(ua)) navegador = "Firefox";
        else if (/Safari/i.test(ua) && !/Chrome/i.test(ua))
          navegador = "Safari";
        else if (/Edge/i.test(ua)) navegador = "Edge";
        else if (/OPR|Opera/i.test(ua)) navegador = "Opera";

        const resolucion = `${window.innerWidth}x${window.innerHeight}`;
        const idioma = navigator.language || navigator.userLanguage || "";

        return {
          visitanteID: obtenerVisitanteID(),
          timestamp: new Date().toISOString(),
          so,
          dispositivo,
          navegador,
          resolucion,
          idioma,
          referrer: document.referrer || "",
          page: location.pathname + location.search || "",
        };
      }

      // Generar ID √∫nico por visitante
      function obtenerVisitanteID() {
        let id = localStorage.getItem("visitanteID");
        if (!id) {
          id =
            crypto && crypto.randomUUID
              ? crypto.randomUUID()
              : "v-" +
                Date.now() +
                "-" +
                Math.random().toString(36).slice(2, 9);
          localStorage.setItem("visitanteID", id);
        }
        return id;
      }

      // Obtener IP
      async function obtenerIP() {
        try {
          const res = await fetch("https://ipapi.co/json/");
          const data = await res.json();
          return {
            ip: data.ip || "",
            ciudad: data.city || "",
            pais: data.country_name || "",
          };
        } catch (err) {
          console.error("No se pudo obtener IP:", err);
          return { ip: "", ciudad: "", pais: "" };
        }
      }

      // Registrar visita detallada
      async function registrarVisitaDetalle() {
        try {
          await contarVisitaUnaVez();
          const info = obtenerInfoDispositivo();
          const ipInfo = await obtenerIP();
          const infoCompleta = { ...info, ...ipInfo };
          await addDoc(collection(db, "visitas_detalle"), infoCompleta);
        } catch (err) {
          console.error("Error registrando visita detalle:", err);
        }
      }

      // Ejecutar
      registrarVisitaDetalle();
    </script>
  </body>
</html>
